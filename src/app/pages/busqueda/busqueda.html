<div class="search-container fadeIn">

  <!-- Header -->
  <header class="page-header">
    <h1 class="page-title">Búsqueda Global</h1>
    <div class="title-divider"></div>
    <p class="page-intro">
      Localiza componentes, semántica y navegación en todo el sistema.
    </p>
  </header>

  <div class="search-layout">

    <!-- Search Controls Panel -->
    <aside class="search-controls glass-panel">

      <!-- Simple Search -->
      <div class="control-group">
        <label class="control-label">Término clave</label>
        <div class="input-wrapper">
          <input class="search-input-field" placeholder="Ej: menú, footer..." [(ngModel)]="query"
            (keyup.enter)="doSearch()" />
          <button class="btn btn-primary btn-magnetic" (click)="doSearch()">
            <span>Buscar</span>
          </button>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-grid">
        <div class="control-group">
          <label class="control-label">Tipo de Elemento</label>
          <select class="search-select" [(ngModel)]="filters.type" (change)="doSearch()">
            <option value="todos">Todos</option>
            <option value="pagina">Página</option>
            <option value="seccion">Sección</option>
          </select>
        </div>

        <div class="control-group">
          <label class="control-label">Sección</label>
          <select class="search-select" [(ngModel)]="filters.section" (change)="doSearch()">
            <option value="todas">Todas</option>
            <option *ngFor="let s of sections" [value]="s">{{ s }}</option>
          </select>
        </div>
      </div>

      <div class="control-actions">
        <button class="btn-text" (click)="clear()">Limpiar Filtros</button>
      </div>

    </aside>

    <!-- Results Grid -->
    <section class="results-area">
      <h3 class="results-title">Resultados</h3>

      <ng-container *ngIf="results$ | async as results; else loadingTemplate">

        <!-- Empty State -->
        <div *ngIf="results.length === 0" class="empty-state">
          <p>No se encontraron resultados activos.</p>
        </div>

        <!-- Result Cards -->
        <div class="results-list" *ngIf="results.length > 0">
          <a *ngFor="let item of results" [routerLink]="item.path" class="canvas-card result-card">
            <div class="result-content">
              <h4 class="result-heading">{{ item.tittle }}</h4>
              <p class="result-desc">{{ item.description }}</p>
            </div>
            <div class="result-meta">
              <span class="meta-tag">{{ item.section | uppercase }}</span>
              <span class="meta-arrow">&rarr;</span>
            </div>
          </a>
        </div>

      </ng-container>

      <ng-template #loadingTemplate>
        <div class="results-list">
          <div class="canvas-card skeleton-card" *ngFor="let i of [1,2,3]">
            <div class="skeleton-line title"></div>
            <div class="skeleton-line text"></div>
          </div>
        </div>
      </ng-template>

    </section>

  </div>

</div>